<div class="container">
  <ng-container *ngIf="isOwnProfile">
    <h3 class="profileUsername">Welcome, {{user?.username}}!</h3>
  </ng-container>
  <!--if not your profile-->
  <ng-container *ngIf="!isOwnProfile">
    <h3 class="profileUsername">{{user?.username}}'s profile</h3>
  </ng-container>


  <h5 id="profileJoinedDate">Joined: {{user?.formatDate}}</h5>
  <h5 class="profileEmail">Email: {{user?.email}}</h5>
  <h5 id="profileBio">Bio: {{user?.bio == null ? '(No Bio)' : user?.bio}}</h5>

  <h3 *ngIf="isOwnProfile">You are currently logged in. <span *ngIf="posts?.length > 0"><a routerLink="/posts/create"> Create a post.</a></span></h3>
</div>

<div class="container">

  <ngb-tabset>
    <ngb-tab title="Posts">
      <ng-template ngbTabContent>

        <div *ngIf="posts?.length == 0">Posts are empty. <a routerLink="/posts/create" *ngIf="isOwnProfile"> Create a post.</a></div>
        <div *ngFor="let post of sortedPostsById(posts)" class="margin-top">

          <a routerLink="/post/{{post.id}}/{{post.title}}">
            <h4 [innerHTML]="post.htmlTitle" id="profile-post-title">{{post.title}}</h4>
          </a>
          <h5 [innerHTML]="post.htmlSubtitle" id="profile-post-subtitle">{{post.subtitle}}</h5>
          <span class="margin-right-lt">{{post.hoursMinutes}}</span><span class="margin-right">{{post.formatDate}}</span>
          <i class="fa fa-thumbs-up margin-right-lt"></i>{{post.voteCount}}
          <a routerLink="/post/{{post.id}}/{{post.title}}"><div [innerHTML]="post.htmlLeadImage" id="profile-post-image">{{post.leadImage}}</div></a>

          <div ngbDropdown class="d-inline-block" *ngIf="isOwnProfile">

            <i class="fas fa-ellipsis-h options-ellipsis dropdown-toggle" id="dropdownBasic1" ngbDropdownToggle></i>

            <div ngbDropdownMenu aria-labelledby="dropdownBasic1" class="edit-delete-dropdown">
              <div>
                <a href="/posts/{{post.id}}/edit" class="dropdown-edit-btn">
                  <i class="fa fa-edit"></i> edit
                </a>
              </div>
              <div>
                <a ng-click="deletePost(post)" class="dropdown-delete-btn">
                  <i class="fa fa-trash"></i> delete
                </a>
              </div>
            </div>
          </div>

        </div>

      </ng-template>
    </ngb-tab>
    <ngb-tab title="Comments">
      <!--<ng-template ngbTabTitle><b>Fancy</b> title</ng-template>-->
      <ng-template ngbTabContent>
        <div *ngIf="comments?.length == 0">Posts are empty.>A list of comments the user has made will go here. Seen by everyone.</div>
      </ng-template>
    </ngb-tab>
    <!--<ngb-tab title="Account Settings" [disabled]="true">-->
    <ngb-tab title="Account Settings" *ngIf="isOwnProfile">
      <ng-template ngbTabContent>

        <div class="container">
            <button class="btn btn-primary" (click)="toggleEditUserForm()">
              Edit Account
            </button>
        <!--<button class="btn" ng-click="toggleEditPasswordForm()"></button>-->
          <ng-container *ngIf="showEditUserForm">
            <app-user-edit></app-user-edit>
          </ng-container>

        </div>

      </ng-template>
    </ngb-tab>
  </ngb-tabset>

</div>
